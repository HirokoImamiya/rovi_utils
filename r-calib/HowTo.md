# ロボットキャリブレーション

### 1. キャリブレーションボード  
[gridboard](gridboard.pdf)

### 2. ロボットキャリブレーションユーティリティの起動  
**キャリブレーション**を起動する前に、必ず**VTを停止**してください。VTの停止、キャリブレーションの起動とも、ダッシュボードから行います。

### 3. 操作  
<table>
<tr><td>1<td>サンプルプログラム<br>
TBからキャリブレーションプログラムのサンプルを読み込みます。以下はTBからの操作を前提にしていますが、同操作がUIから行えるものもあります。このような操作が可能なものについては()にて示します。
<tr><td>2<td>キャリブレーションボードの設置<br>
キャリブレーションボードを床など設置します。ボードはキャリブレーションの操作中に動かないようにします。
<tr><td>3<td>撮影調整<br>
<img src="fig1.png" height="200" align="right" />
ソフトがボードを認識すると、図のようにマーカがオーバレイされます。ほぼ全ての●が認識されるよう調整します。調整は(ライブ調整/カメラ露光時間)によって明るさを調整します。
<tr><td>4<td>視点移動<br>
黄色枠にキャリブ板が合うようにロボット姿勢を動かします。
またこのとき(操作/再投影誤差)が <b>0.2</b> 以下であることを確認します。  
<tr><td>5<td>取り込み<br>
TBから[ROVI_RESET]または[X0script]を実行します(操作/取り込み)。<br>
これによってデータ(ロボット座標とキャリブ板座標)が取り込まれ、黄色枠は次のロボット姿勢の指示に変わります。2&rarr;3を20箇所程度繰り返します。
<tr><td>6<td>解析<br>
取り込んだデータを解析します。結果の妥当性は(解析/誤差)にて判断します。誤差が1mm(0.001m)以下であれば妥当です。  
やり直す場合は、(操作/カウントリセット)して収集したデータを破棄してから行います。
<tr><td>7<td>評価<br>
<img src="fig3.png" height="200" align="right" />  <img src="fig4.png" height="200" align="right" />
解析結果のTransformは"カメラ/カメラマウント変換"に表示されています。[TFに反映]ボタンを押すと結果がTFに反映されRvizで見ることができます。下図のようにcameraフレームが実際のカメラの位置に表示されていればキャリブレーション成功です。
<tr><td>8<td>保存<br>
上側のパネルの「保存」ボタンを押して、キャリブレーション結果を保存します。
</table>

### 4.ロボットキャリブレーションユーティリティの終了  
起動とは逆に、先に**キャリブレーション**を停止、**VTを起動**します。
